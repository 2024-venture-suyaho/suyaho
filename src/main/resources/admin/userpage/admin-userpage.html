<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdminPage</title>
    <link rel="stylesheet" href="./css/admin-userpage.css">
</head>
<body>
<div class="back">
    <button>뒤로가기</button>
</div>
<h1 style="text-align: center;">사용자 프로필 페이지</h1>
<div class="profile-container">
    <div class="profile-image" id="profileImageContainer">
        <img id="profilePic" src="../../asf.png" alt="Profile Picture">
        <input type="file" id="fileInput" style="display: none;">
        <label class="change-pic-btn" id="changePicBtn" style="text-align: center; cursor: pointer;">프로필 사진 변경</label>
        <p id="userPoint" class="point-info"></p> <!-- 포인트 정보 -->
    </div>
    <div class="profile-info">
        <div>
            <div id="userNick"></div>
            <div id="userName"></div>
            <p style="font-weight: bold;">Email</p>
            <div id="userEmail"></div> <!-- userEmail 추가 -->

            <p style="font-weight: bold;">전화번호</p>
            <div id="userPhone"></div> <!-- userPhone 추가 -->
            <div class ="phone-combined">
                <input type="text" id="phoneInput" style="margin-top: 10px;"> <!-- 전화번호 변경 입력칸 -->
                <button id="changePhoneBtn">변경</button> <!-- 전화번호 변경 버튼 --></div>
            <p id="userPointDisplay"></p> <!-- 포인트 정보 출력 -->
            <div class="schoolmajor">
                <p style="font-weight: bold; margin-bottom: 5px;">학과</p>
                <div id="usermajor"></div>
                <select id="majorDropdown">
                    <option value="" disabled selected hidden>학과를 선택하세요</option>
                    <option value="간호">간호</option>
                    <option value="건축">건축</option>
                    <option value="경영">경영</option>
                    <option value="글로벌한국학">글로벌한국학</option>
                    <option value="동물자원과학">동물자원과학</option>
                    <option value="물리치료">물리치료</option>
                    <option value="바이오융합공학">바이오융합공학</option>
                    <option value="보건관리">보건관리</option>
                    <option value="빅데이터클라우드공학">빅데이터클라우드공학</option>
                    <option value="사회복지">사회복지</option>
                    <option value="상담심리">상담심리</option>
                    <option value="식품영양">식품영양</option>
                    <option value="신학">신학</option>
                    <option value="아트앤디자인">아트앤디자인</option>
                    <option value="약학">약학</option>
                    <option value="영어영문">영어영문</option>
                    <option value="유아교육">유아교육</option>
                    <option value="음악">음악</option>
                    <option value="인공지능융합">인공지능융합</option>
                    <option value="체육">체육</option>
                    <option value="컴퓨터공학">컴퓨터공학</option>
                    <option value="항공관광외국어">항공관광외국어</option>
                    <option value="화학생명과학">화학생명과학</option>
                    <option value="환경디자인원예">환경디자인원예</option>
                </select>
                <button id="changeMajorBtn">변경</button>
            </div><br>
            <label for="currentPassword">현재 비밀번호</label><br>
            <input type="password" id="currentPassword" name="currentPassword" required placeholder="비밀번호를 입력해주세요">
            <br>
            <label for="newPassword">새로운 비밀번호</label><br>
            <input type="password" id="newPassword" name="newPassword" required placeholder="새로운 비밀번호를 입력해주세요">
            <br>
            <label for="confirmPassword">비밀번호 확인</label><br>
            <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="비밀번호를 다시 입력해주세요">
            <br>
            <button id="changePasswordBtn">비밀번호 변경</button> <!-- 변경 버튼 추가 -->

        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const userData = {
            nick: 'leejh12',
            name: '이재혁',
            email: 'honggildong@syuin.ac.kr',
            phone: '010-1234-5678',
            profilePic: 'asf.png',
            major: '컴퓨터공학',
            point: 0,
            password: '1234'
        };

        document.getElementById('userNick').innerText = userData.nick;
        document.getElementById('userName').innerText = userData.name;
        document.getElementById('userEmail').innerText = userData.email;
        document.getElementById('userPhone').innerText = userData.phone;
        document.getElementById('phoneInput').value = userData.phone;
        document.getElementById('usermajor').innerText = userData.major;
        document.getElementById('userPoint').innerText = `포인트: ${userData.point}`;

        // 파일 입력 변경
        document.getElementById('fileInput').addEventListener('change', handleFileSelect);

        // 프로필 사진 변경 버튼 클릭 이벤트
        document.getElementById('changePicBtn').addEventListener('click', () => {
            document.getElementById('fileInput').click(); // 파일 선택창
        });

        // 전화번호 변경 버튼에 클릭 이벤트
        document.getElementById('changePhoneBtn').addEventListener('click', () => {
            const newPhoneNumber = document.getElementById('phoneInput').value; // 입력칸에 입력된 전화번호 가져오기
            updatePhoneNumber(newPhoneNumber); // 전화번호 업데이트
        });

        // 학과 변경 버튼에 클릭 이벤트
        document.getElementById('changeMajorBtn').addEventListener('click', () => {
            const newMajor = document.getElementById('majorDropdown').value; // 학과 가져오기
            updateMajor(newMajor); // 학과 업데이트
        });

        // 비밀번호 변경 버튼에 클릭 이벤트
        document.getElementById('changePasswordBtn').addEventListener('click', () => {
            const currentPassword = document.getElementById('currentPassword').value; // 현재 비밀번호
            const newPassword = document.getElementById('newPassword').value; // 새로운 비밀번호 입력 값 가져옴
            const confirmPassword = document.getElementById('confirmPassword').value; // 비밀번호 확인 입력란 값 가져옴

            // 현재 비밀번호가 올바른지 확인
            if (currentPassword !== userData.password) {
                alert('현재 비밀번호가 올바르지 않습니다.');
                return;
            }

            // 새로운 비밀번호와 비밀번호 확인이 일치하는지 확인
            if (newPassword !== confirmPassword) {
                alert('새로운 비밀번호와 비밀번호 확인이 일치하지 않습니다.');
                return;
            }

            // 새로운 비밀번호 업데이트
            userData.password = newPassword;
            alert('비밀번호가 성공적으로 변경되었습니다.');
        });
    });

    // 학과 업데이트
    function updateMajor(newMajor) {
        // 입력된 학과 업데이트
        document.getElementById('usermajor').innerText = newMajor;
    }

    // 파일이 선택됐을 때
    function handleFileSelect(event) {
        const selectedFile = event.target.files[0]; // 선택된 파일 가져오기
        const reader = new FileReader();

        // 파일을 읽기 시작
        reader.onload = function(event) {
            const profileImage = document.getElementById('profilePic');
            profileImage.src = event.target.result; // 선택 사진을 프로필 이미지로 설정
        };

        reader.readAsDataURL(selectedFile);
    }

    // 전화번호 업데이트
    function updatePhoneNumber(newPhoneNumber) {
        // 입력된 전번 화면에 업데이트
        document.getElementById('userPhone').innerText = newPhoneNumber;
    }
</script>
</body>
</html>
